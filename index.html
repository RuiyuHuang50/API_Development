<!DOCTYPE html>
<html>
  <head>
    <title>Flask API Tester</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background-color: #f5f5f5;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #333;
        text-align: center;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
      }
      .endpoint {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fafafa;
      }
      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        cursor: pointer;
        border-radius: 4px;
        margin-right: 10px;
      }
      button:hover {
        background: #0056b3;
      }
      pre {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        border-left: 4px solid #007bff;
        overflow-x: auto;
      }
      .input-group {
        margin: 10px 0;
      }
      input[type="text"],
      input[type="email"] {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-right: 10px;
        width: 200px;
      }
      .status-success {
        color: #28a745;
      }
      .status-error {
        color: #dc3545;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üöÄ Flask API Tester</h1>

      <div class="endpoint">
        <h3>üìÑ GET / (Home)</h3>
        <button onclick="getHome()">Get API Info</button>
        <pre id="home-result"></pre>
      </div>

      <div class="endpoint">
        <h3>üìä GET /input</h3>
        <button onclick="testGet()">Get Sample Data</button>
        <pre id="get-result"></pre>
      </div>

      <div class="endpoint">
        <h3>üì§ POST /submit</h3>
        <div class="input-group">
          <input
            type="text"
            id="submit-name"
            placeholder="Name"
            value="Web Client"
          />
          <input
            type="text"
            id="submit-value"
            placeholder="Value"
            value="789"
          />
          <button onclick="testPost()">Submit Data</button>
        </div>
        <pre id="post-result"></pre>
      </div>

      <div class="endpoint">
        <h3>üë• GET /users</h3>
        <button onclick="getUsers()">Get All Users</button>
        <button onclick="getUser()">Get User by ID</button>
        <input
          type="text"
          id="user-id"
          placeholder="User ID"
          value="1"
          style="width: 60px"
        />
        <pre id="users-result"></pre>
      </div>

      <div class="endpoint">
        <h3>‚ûï POST /users (Create User)</h3>
        <div class="input-group">
          <input type="text" id="new-name" placeholder="Name" value="Charlie" />
          <input
            type="email"
            id="new-email"
            placeholder="Email"
            value="charlie@example.com"
          />
          <button onclick="createUser()">Create User</button>
        </div>
        <pre id="create-result"></pre>
      </div>

      <div class="endpoint">
        <h3>‚úèÔ∏è PUT /users/:id (Update User)</h3>
        <div class="input-group">
          <input
            type="text"
            id="update-id"
            placeholder="User ID"
            value="1"
            style="width: 60px"
          />
          <input
            type="text"
            id="update-name"
            placeholder="New Name"
            value="Alice Updated"
          />
          <input
            type="email"
            id="update-email"
            placeholder="New Email"
            value="alice.new@example.com"
          />
          <button onclick="updateUser()">Update User</button>
        </div>
        <pre id="update-result"></pre>
      </div>

      <div class="endpoint">
        <h3>üóëÔ∏è DELETE /users/:id</h3>
        <div class="input-group">
          <input
            type="text"
            id="delete-id"
            placeholder="User ID"
            value="2"
            style="width: 60px"
          />
          <button onclick="deleteUser()">Delete User</button>
        </div>
        <pre id="delete-result"></pre>
      </div>
    </div>

    <script>
      const FLASK_URL = "http://localhost:3000";
      function displayResult(elementId, data, isError = false) {
        const element = document.getElementById(elementId);
        element.textContent = JSON.stringify(data, null, 2);
        element.className = isError ? "status-error" : "status-success";
      }

      async function getHome() {
        try {
          const response = await fetch(`${FLASK_URL}/`);
          const data = await response.json();
          displayResult("home-result", data);
        } catch (error) {
          displayResult("home-result", { error: error.message }, true);
        }
      }

      async function testGet() {
        try {
          const response = await fetch(`${FLASK_URL}/input`);
          const data = await response.json();
          displayResult("get-result", data);
        } catch (error) {
          displayResult("get-result", { error: error.message }, true);
        }
      }

      async function testPost() {
        try {
          const name = document.getElementById("submit-name").value;
          const value = document.getElementById("submit-value").value;

          const response = await fetch(`${FLASK_URL}/submit`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              name: name,
              value: parseInt(value) || value,
            }),
          });
          const data = await response.json();
          displayResult("post-result", data);
        } catch (error) {
          displayResult("post-result", { error: error.message }, true);
        }
      }

      async function getUsers() {
        try {
          const response = await fetch(`${FLASK_URL}/users`);
          const data = await response.json();
          displayResult("users-result", data);
        } catch (error) {
          displayResult("users-result", { error: error.message }, true);
        }
      }

      async function getUser() {
        try {
          const userId = document.getElementById("user-id").value;
          const response = await fetch(`${FLASK_URL}/users/${userId}`);
          const data = await response.json();
          displayResult("users-result", data, response.status !== 200);
        } catch (error) {
          displayResult("users-result", { error: error.message }, true);
        }
      }

      async function createUser() {
        try {
          const name = document.getElementById("new-name").value;
          const email = document.getElementById("new-email").value;

          const response = await fetch(`${FLASK_URL}/users`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name: name, email: email }),
          });
          const data = await response.json();
          displayResult("create-result", data, response.status !== 201);
        } catch (error) {
          displayResult("create-result", { error: error.message }, true);
        }
      }

      async function updateUser() {
        try {
          const userId = document.getElementById("update-id").value;
          const name = document.getElementById("update-name").value;
          const email = document.getElementById("update-email").value;

          const response = await fetch(`${FLASK_URL}/users/${userId}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name: name, email: email }),
          });
          const data = await response.json();
          displayResult("update-result", data, response.status !== 200);
        } catch (error) {
          displayResult("update-result", { error: error.message }, true);
        }
      }

      async function deleteUser() {
        try {
          const userId = document.getElementById("delete-id").value;
          const response = await fetch(`${FLASK_URL}/users/${userId}`, {
            method: "DELETE",
          });
          const data = await response.json();
          displayResult("delete-result", data, response.status !== 200);
        } catch (error) {
          displayResult("delete-result", { error: error.message }, true);
        }
      }
    </script>
  </body>
</html>
